<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Modern Travel Guide</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@700;800&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link async href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body>


    <style>
        .icon i {
            color: #00B98E !important;
        }
    </style>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->
        <!-- Navbar Start -->
        <div class="container-fluid nav-bar bg-transparent">
            <nav class="navbar navbar-expand-lg bg-white navbar-light py-0 px-4">
                <a href="index.html" class="navbar-brand d-flex align-items-center text-center">
                    <div class="icon p-2 me-2">
                        <!--<img class="img-fluid" src="img/icon-deal.png" alt="Icon" style="width: 30px; height: 30px;">-->
                        <!--<i class="fa fa-map-marker fa-2x" aria-hidden="true"></i>-->
                        <i class="fa-solid fa-location-dot img-fluid" style="font-size:30px;width: 30px; height: 30px;"></i>
                    </div>
                    <h1 class="m-0 text-primary">Modern Traveler</h1>
                </a>
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto">

                        <!--<a href="https://www.linkedin.com/in/ertekin-ozturgut" class="nav-item nav-link active">Ertekin Ozturgut</a>-->
                    </div>
                    <button type="button" class="btn btn-primary px-3 d-none d-lg-flex" id="get-location">Get My Current Location</button>
                </div>
            </nav>
        </div>
        <!-- Navbar End -->
        <!-- Header Start -->
        <div class="container-fluid header bg-white p-0">
            <div class="row g-0 align-items-center flex-column-reverse flex-md-row">
                <div class="col-md-6 p-5 mt-lg-5">
                    <h1 class="animated fadeIn mb-4">Helper for Travelers</h1>
                    <nav aria-label="breadcrumb animated fadeIn">
                        <ol class="breadcrumb text-uppercase">
                            <li style="font-size:1.6em" class="breadcrumb-item"><a href="https://www.linkedin.com/in/ertekin-ozturgut">Developed By <b>Ertekin Ozturgut</b></a></li>
                        </ol>
                    </nav>
                </div>
                <div class="col-md-6 animated fadeIn">
                    <img class="img-fluid" style="width: 100% !important;" src="img/luggage-g4502a8b6a_640.jpg" alt="">
                </div>
            </div>
        </div>
        <!-- Header End -->
        <!-- Search Start -->
        <div class="container-fluid bg-primary mb-5 wow fadeIn" data-wow-delay="0.1s" style="padding: 35px;">
            <div class="container">
                <div class="row g-2">
                    <div class="col-md-12">
                        <div class="row g-2">
                            <!--<div class="col-md-4">-->
                            <!--<input type="text" class="form-control border-0 py-3" placeholder="Place Name/Place Type">-->
                            <!--<select class="form-select border-0 py-3" id="placeType">
                            <option selected>Place Select</option>-->
                            <!--<option value="1">Property Type 1</option>
                            <option value="2">Property Type 2</option>
                            <option value="3">Property Type 3</option>-->
                            <!--</select>
                            </div>-->
                            <div class="col-md-6">
                                <select class="form-select border-0 py-3" id="country">
                                    <option selected>Country Select</option>
                                    <!--<option value="1">Property Type 1</option>
                                    <option value="2">Property Type 2</option>
                                    <option value="3">Property Type 3</option>-->
                                </select>
                            </div>
                            <div class="col-md-6">
                                <select class="form-select border-0 py-3" id="city">
                                    <option selected>City Select</option>
                                    <!--<option value="1">Location 1</option>
                                    <option value="2">Location 2</option>
                                    <option value="3">Location 3</option>-->
                                </select>
                            </div>
                        </div>
                    </div>
                    <!--<div class="col-md-2">
                        <button class="btn btn-dark border-0 w-100 py-3 btn-search">Search</button>
                    </div>-->
                </div>
            </div>
        </div>
        <!-- Search End -->
        <!-- Category Start -->
        <div class="container-xxl py-5">
            <div class="container">
                <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                    <h1 class="mb-3">Place Types</h1>
                    <p>You can choose your favorite touristic place with one click below.</p>
                </div>
                <div class="row g-4 place-types-cards">
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
                        <a class="cat-item d-block bg-light text-center rounded p-3" href="#results" data-query="touristic+places">
                            <div class="rounded p-4">
                                <div class="icon mb-3">
                                    <i class=""></i>
                                    <!--<img class="img-fluid" src="img/icon-luxury.png" alt="Icon">-->
                                    <i class="fas fa-layer-group fa-2x"></i>
                                </div>
                                <h6>All Touristic Places</h6>

                            </div>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
                        <a class="cat-item d-block bg-light text-center rounded p-3" href="#results" data-query="museums">
                            <div class="rounded p-4">
                                <div class="icon mb-3">
                                    <!--<img class="img-fluid" src="img/icon-apartment.png" alt="Icon">-->
                                    <i class="img-fluid fa-2x fas fa-landmark"></i>
                                </div>
                                <h6>Museums</h6>

                            </div>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
                        <a class="cat-item d-block bg-light text-center rounded p-3" href="#results" data-query="palaces">
                            <div class="rounded p-4">
                                <div class="icon mb-3">
                                    <i class="fas fa-crown fa-2x"></i>
                                </div>
                                <h6>Palaces</h6>

                            </div>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
                        <a class="cat-item d-block bg-light text-center rounded p-3" href="#results" data-query="galeries">
                            <div class="rounded p-4">
                                <div class="icon mb-3">
                                    <i class="fa fa-paint-brush fa-2x"></i>
                                </div>
                                <h6>Galeries</h6>

                            </div>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
                        <a class="cat-item d-block bg-light text-center rounded p-3" href="#results" data-query="entertainment+venues">
                            <div class="rounded p-4">
                                <div class="icon mb-3">
                                    <i class="fa fa-guitar fa-2x"></i>
                                </div>
                                <h6>
                                    Entertainment Venues
                                </h6>

                            </div>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
                        <a class="cat-item d-block bg-light text-center rounded p-3" href="#results" data-query="parks">
                            <div class="rounded p-4">
                                <div class="icon mb-3">
                                    <i class="fa fa-tree fa-2x"></i>
                                </div>
                                <h6>Parks</h6>

                            </div>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
                        <a class="cat-item d-block bg-light text-center rounded p-3" href="#results" data-query="restaurants">
                            <div class="rounded p-4">
                                <div class="icon mb-3">
                                    <i class="fa fa-utensils fa-2x"></i>
                                </div>
                                <h6>Restaurants</h6>

                            </div>
                        </a>
                    </div>

                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
                        <a class="cat-item d-block bg-light text-center rounded p-3" href="#results" data-query="shops">
                            <div class="rounded p-4">
                                <div class="icon mb-3">
                                    <i class="fa fa-cart-shopping fa-2x"></i>
                                </div>
                                <h6>Shops</h6>

                            </div>
                        </a>
                    </div>

                </div>
            </div>
        </div>
        <!-- Category End -->
        <!-- Contact Start -->
        <div class="container-xxl py-5">
            <div class="container">

                <div class="row g-4">

                    <div class="col-md-12 wow fadeInUp map-area" data-wow-delay="0.1s" style="min-height:45vh">
                        <!--<iframe class="position-relative rounded w-100 h-100" loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade"

                        src="https://www.google.com/maps/embed/v1/place?key=AIzaSyA-HbKmHKg1xJRIsMvEgoZly8sc_b9XaJM&q=touristic+places+in+istanbul"
                        frameborder="0" style="min-height: 400px; border:0;" aria-hidden="false"
                        tabindex="0"></iframe>-->


                    </div>

                </div>
            </div>
        </div>

        <div class="container-xxl py-5" id="results">
            <div class="container">
                <div class="row g-4 youtube-container">

                </div>
            </div>

        </div>



        <!--<iframe width="560" height="315" src="https://www.youtube.com/embed/zNtkbrENSyI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>-->


        <input type="hidden" id="search-query" value="" />

        <!-- Contact End -->
        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>


    </div>

    <div class="modal fade bd-example-modal-lg " id="video-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal-label"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div id="video-frame" class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>


    <script src="js/main.js"></script>

    <script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDFJ30EJvxJ7aUkLpEwOgc5au41dIIbZMw",
            authDomain: "modern-traveler.firebaseapp.com",
            databaseURL: "https://modern-traveler-default-rtdb.firebaseio.com",
            projectId: "modern-traveler",
            storageBucket: "modern-traveler.appspot.com",
            messagingSenderId: "867829782611",
            appId: "1:867829782611:web:764669f741296cbcda8ea6",
            measurementId: "G-7P77ZX74FK"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);


        import { getDatabase, ref, get, set, child, update, remove, query, orderByKey, limitToLast, orderByChild, orderByValue, equalTo } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js";

        const db = getDatabase();

        var countries = [];
        const datas = [];
        const dbRef = ref(db);

        function GetCountries() {
            $("#country option").remove();
            $("#country").append("<option>Country Select</option>");



            get(child(dbRef, "/countries")).then((snapshot) => {

                snapshot.forEach((child) => {
                    $("#country").append("<option value='" + child.val() + "'>" + child.val() + "</option>");

                })
                console.log(datas);
            }).catch((error => {
                console.log(error);
            }));


        }

        function GetCities(countryName) {
            $("#city option").remove();
            $("#city").append("<option>City Select</option>");




            const cities =
                query(
                    ref(getDatabase(app), "/"),
                    orderByChild('name'),
                    equalTo(countryName));

            get(cities).then((snapshot) => {

                snapshot.forEach((child) => {

                    $(child.val().states).each(function (i, v) {
                        $("#city").append("<option value='" + v.name + "'>" + v.name + "</option>");

                    });
                });

            });


        }

        $("#country").on("change", function (e) {
            GetCities($(this).val());

        })
        GetCountries();


    </script>
    <script>
        $(document).ready(function () {


            var countryQuery = "Turkey";
            var cityQuery = "Istanbul";
            var placeQuery = "touristic+places";


            mapframeInit(placeQuery, cityQuery, countryQuery);


            $(".btn-search").on("click", function (e) {
                e.preventDefault();

                var isValid = true;

                cityQuery = $("#city").val();
                countryQuery = $("#country").val();
                placeQuery = "touristic+places";

                if ((countryQuery == "" || cityQuery == "")) {
                    alert("You must select country and city");
                    isValid = false;
                }

                if (isValid) {
                    mapframeInit(placeQuery, cityQuery, countryQuery);
                    youtubeInit(placeQuery + " in " + cityQuery);

                }
            })

            function mapframeInit(place, city, country, coordinates = "") {


                var iframeHtml = '<iframe id="map-frame" class="position-relative rounded w-100 h-100" loading="lazy" allowfullscreen ' +
                    'src="https://www.google.com/maps/embed/v1/search?key=AIzaSyA-HbKmHKg1xJRIsMvEgoZly8sc_b9XaJM&language=en' + (coordinates != ""? "&center=" + coordinates+"&q=touristic-places" : "&q={placeQuery}+in+{cityQuery}+{countryQuery}") +'"' +
                    'frameborder="0" style="min-height: 400px; border:0;" ' +
                    'tabindex="0"></iframe>';

                iframeHtml = iframeHtml.replace("{placeQuery}", place);
                iframeHtml = iframeHtml.replace("{cityQuery}", city);
                iframeHtml = iframeHtml.replace("{countryQuery}", country);
                $(".map-area").html(iframeHtml);


            }


            $("#get-location").on("click", function () {
                navigator.geolocation.getCurrentPosition((position) => {
                    var coordinates = position.coords.latitude + "," + position.coords.longitude;
                    mapframeInit("", "", "", coordinates );

                });
            })


            $(".place-types-cards .cat-item").click(function (e) {
                var isValid = true;
                placeQuery = $(this).data("query");
                cityQuery = $("#city").val();
                countryQuery = $("#country").val();

                if (countryQuery == null || cityQuery == null) {
                    alert("You must select country and city");
                    isValid = false;
                }
                if (placeQuery == null) {
                    alert("If you want you can select place type with clicking place type cards");
                    placeQuery = "touristic+places";
                }

                if (isValid) {
                    mapframeInit(placeQuery, cityQuery, countryQuery);
                    youtubeInit(placeQuery + " in " + cityQuery);
                }
            })




            function youtubeInit(search) {
                var duration = "any";
                var order = "relevance";

                var maxResults = 50
                var API_KEY = "AIzaSyAALC3TgkOt4zh0AKUajYPJoLHUz8je_FU";

                $(".youtube-container").empty();

                API_KEY = "AIzaSyAALC3TgkOt4zh0AKUajYPJoLHUz8je_FU";

                var url = `https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&part=snippet&q=${search}&maxResults=${maxResults}&order=${order}&videoDuration=${duration}&type=video&relevanceLanguage=en&regionCode=TR`;

                $.ajax({
                    method: "GET",
                    url: url,
                    beforeSend: function () {

                        $(".btn-search").attr("disabled", true);
                        $(".youtube-container").empty();
                    },
                    success: function (data) {
                        console.log(data);
                        $(".btn-search").attr("disabled", true);
                        displayVideos(data);
                    },
                });


            }

            function displayVideos(data) {

                var videoHtml =
                    '<div class="col-lg-4 col-md-6 video-snippet" data-name="{{videoname}}" data-videourl="{{videourl}}" data-videoid="{{id}}" id={{id}}>' +
                    '<div class="property-item rounded overflow-hidden" style="height: 100 %;">' +
                    '<div class="position-relative overflow-hidden">' +
                    '<a href="#"><img class="img-fluid" src="{{thumbnail}}" alt=""></a>' +
                    '<div class="bg-primary rounded text-white position-absolute start-0 top-0 m-4 py-1 px-3">{{channelname}}</div>' +
                    '</div>' +
                    '<div class="p-4 pb-0">' +
                    '<a class="d-block h5 mb-2" href="">{{videoname}}</a>' +
                    '<p><i class="fa fa-map-marker-alt text-primary me-2"></i>{{description}}</p>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
                var totalRecords = 0,
                    records = [],
                    recPerPage = 0,

                recPerPage = data.pageInfo.resultsPerPage;
                nextPageToken = data.nextPageToken;
                console.log(records);
                totalRecords = data.pageInfo.totalResults;
                totalPages = Math.ceil(totalRecords / recPerPage);


                var videoData = "";


                data.items.forEach((item) => {


                    videoData = videoHtml
                        .replace("{{thumbnail}}", item.snippet.thumbnails.high.url)
                        .replaceAll("{{videoname}}", item.snippet.title)
                        .replace("{{description}}", item.snippet.description)
                        .replace("{{videourl}}", "https://www.youtube.com/watch?v=" + item.id.videoId)
                        .replaceAll("{{id}}", item.id.videoId)
                        .replace("{{channelname}}", item.snippet.channelTitle);

                    $(".youtube-container").append(videoData);

                    $("#" + item.id.videoId).bind("click", youtubeVideoClick);
                });


            }
            function youtubeVideoClick(e) {

                var frame = '<iframe width="100%" height="auto" src="https://www.youtube.com/embed/{id}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'
                $("#video-frame").html(frame.replace("{id}", $(this).data("videoid")))
                $("#modal-label").text($(this).data("name"));
                $("#video-modal").modal("show");

            }


        });


    </script>


</body>

</html>